$NetBSD: README.gcc10,v 1.7 2021/04/14 01:19:13 mrg Exp $


new stuff:
	cc1objcplus
	libmpx
	liboffloadmic
	libvtv
	libcet
	libphobos
	d
	gfortran
	lto-dump
	libbacktrace: +dwarf5_CFLAGS = $(libbacktrace_TEST_CFLAGS) -gdwarf-5


todo:
	- audit all uses of new warning-disable variables and
	  convert some from -Wno- to -Wno-error=

arch/feature list.

tools:		does build.sh tools work?
kernels:	does a kernel run?  y (yes), b (builds/ready), ? (not ready)
libgcc:		does libgcc build?
native-gcc:	does a full mknative-gcc complete?
make release:	does build.sh release complete?
runs:		does the system boot with a full world?
atf:		does atf run / compare well
switched:	has port switched?  y (yes), n (no/ready), ? (not ready)


architecture	tools	kernels	libgcc	native-gcc	make release	runs	atf	switched
------------	-----	-------	------	----------	------------	----	---	--------
aarch64		y	n[3]	y	y		n		?	?	?
aarch64be	y	n	n	y		n		?	?	?
alpha		y	b	y	y		y		?	?	?
earmv4		y	y	y	y		y		y	?	n
earmv4eb	y	b	y	y		n		?	?	?
earmv5		y	b	y	y		n		?	?	?
earmv5eb	y	b	y	y		n		?	?	?
earmv5hf	y	b	y	y		n		?	?	?
earmv5hfeb	y	b	y	y		n		?	?	?
earmv6		y	b	y	y		n		?	?	?
earmv6eb	y	b	y	y		n		?	?	?
earmv6hf	y	b	y	y		n		?	?	?
earmv6hfeb	y	b	y	y		n		?	?	?
earmv7		y	b	y	y		n		?	?	?
earmv7eb	y	b	y	y		n		?	?	?
earmv7hf	y	y	y	y		y		y	y	n
earmv7hfeb	y	b	y	y		y		?	?	?
hppa		y	b	y	y		y		?	?	?
i386		y	y	y	y		y		y	n[8]	?
ia64		y	y	y	y		n[2]		?	N/A	n
m68000		y	b	y	y		n[1]		?	?	?
m68k		y	y	y	y		y		?	?	?
mipseb		y	b	y	y		y		?	?	?
mipsel		y	b	y	y		y		?	?	?
mips64eb	y	y	y	y		y		n[4,5]	?	?
mips64el	y	b	y	y		y		?	?	?
powerpc		y	b	y	y		y		?	?	?
powerpc64	y	b	y	y		y		N/A	N/A	?
sh3eb		y	b	y	y		y		?	?	?
sh3el		y	y	y	y		y		y	?	?
sparc		y	y	y	y		y		y	y	n
sparc64		y	y	y	y		y		y	y	n
vax		y	y	y	y		y		y	n[6]	n
x86_64		y	y	y	y		y		y	y	n
riscv32		y	N/A	y	y		y		N/A	N/A	n
riscv64		y	N/A	y	y		y		N/A	N/A	n
--
coldfire	?	N/A	?	?		?		N/A	N/A
------------	-----	-------	------	----------	------------	----	---
architecture	tools	kernels	libgcc	native-gcc	make release	runs	atf

[1] - ramdisk.fs is too large, needs fixing.
[2] - rescue fails to build:
      /tmp//ccnNTCsS.s: Assembler messages:
      /tmp//ccnNTCsS.s:610: Warning: .label_state outside of body region
      /tmp//ccnNTCsS.s:611: Warning: .restore outside of body region
      /tmp//ccnNTCsS.s: Error: 2 warnings, treating warnings as errors
[3] - missing __aarch64_swp1_acq in kernels.
[4] - edgerouter lite3 crashes early in boot:
      [   1.0000000] u-boot bootmem desc @ 0x24108 version 3.0
      [   1.0000000] phys segment: 0xfc000 @ 0x102000
      [   1.0000000] adding 0xfc000 @ 0x102000 to freelist 3
      [   1.0000000] phys segment: 0x7276000 @ 0xe8a000
      [   1.0000000] adding 0x7276000 @ 0xe8a000 to freelist 3
      [   1.0000000] phys segment: 0x7efa000 @ 0x8102000
      [   1.0000000] adding 0x7efa000 @ 0x8102000 to freelist 3
      [   1.0000000] phys segment: 0xff00000 @ 0x410000000
      [   1.0000000] adding 0xff00000 @ 0x410000000 to freelist 0
      [   1.0000000] pid 0(system): trap: cpu0, TLB miss (load or instr. fetch) in kernel mode
      [   1.0000000] status=0xa3, cause=0x8, epc=0xffffffff802564d4, vaddr=0
      [   1.0000000] tf=0x9800000000165bb0 ksp=0x9800000000165cf0 ra=0xffffffff80256470 ppl=0
      [   1.0000000] kernel: TLB miss (load or instr. fetch) trap
      Stopped in pid 0.0 (system) at  ffffffff802564d4:       sw      zero,16(s0)
      0x9800000000165cf0: 0xffffffff802563+0xd8 (0xffffffff80000000,0,0,0xc000000008000000) ra 0xffffffff803edd18 sz 0
      0x9800000000165cf0: 0xffffffff803edc+0x84 (0xffffffff80000000,0,0,0xc000000008000000) ra 0 sz 0
    - OCTEON kernel seems OK, something in my private configuration?
[5] - userland is broken.  some dynamic apps run on old install (ie, old
      ld.elf_so & shlibs) but nothing in chroot runs (static or dynamic).
      memset.c compiles wrongly, wants -ffreestanding.  oddness.
[6] - vax vs c++ exceptions issue
[8] - i386 seems to have a signal delivery issue.  GCC 9 or 10 kernels are
      unable to reboot properly, and GCC 10 atf runs hang in signal delivery.




CPU vs platform test table (for CPUs with multiple ports).  this is "make release" or just kernels.
values:		y (yes), k (kernels only), n (failed), r (running), ? (not attempted), nx (yes, no x11)

CPU		platform list
---		-------- ----
		acorn32		cats	epoc32	evbarm-eb	evbarm-el	hpcarm		iyonix		netwinder	shark 		zaurus
earmv4:		k		k	k	k		k		k		 		k		y		 
earm:		 		 	 	k		k		 		k		 		 		k
earmhf:		 		 	 	k		k		 		 		 		 		 
earmv6:		 		 	 	k		k
earmv6hf:	 		 	 	k		k
earmv7:		 		 	 	k		y
earmv7hf:	 		 	 	y		k

		amiga		atari	cesfic	hp300		luna68k		mac68k		mvme68k		news68k		next68k		sun3	x68k
m68k:		k		k	k	k		k		k		k		k		k		y 	k

		evbmips		emips		ews4800mips	mipsco		newsmips	sgimips
mipseb:		y		k		k		k		y		?

		evbmips		algor		arc		cobalt		hpcmips		pmax
mipsel:		y		y		y		y		y		y

		algor		evbmips		pmax
mips64eb:	 		y		 
mips64el:	k		y		k

		amigappc	bebox	evbppc	ibmnws		macppc		mvmeppc		ofppc		prep		rs6000		sandpoint
powerpc:	k		k	k	k		y		k		k		k		k		k

		evbppc		macppc		ofppc
powerpc64:	y		y		y

		dreamcast	evbsh3		hpcsh		landisk		mmeye
sh3eb:		 		k		 		 		y
sh3el:		k		k		k		y
